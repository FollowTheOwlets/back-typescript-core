<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#C14424" data-link-color="#C14424"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-10-01T18:55:34.9229454"><title>NPM | Backend Typescript</title><script type="application/json" id="virtual-toc-data">[{"id":"trk8ev_2","level":0,"title":"Суть","anchor":"#trk8ev_2"},{"id":"trk8ev_3","level":0,"title":"Основные команды","anchor":"#trk8ev_3"},{"id":"trk8ev_4","level":0,"title":"Установка пакетов","anchor":"#trk8ev_4"},{"id":"trk8ev_5","level":0,"title":"Отслеживание версий (SemVer)","anchor":"#trk8ev_5"},{"id":"trk8ev_6","level":0,"title":"Очистка кэша","anchor":"#trk8ev_6"},{"id":"trk8ev_7","level":0,"title":".npmrc (конфигурация npm)","anchor":"#trk8ev_7"},{"id":"trk8ev_8","level":0,"title":"Практический минимум: от нуля до запуска","anchor":"#trk8ev_8"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="NPM | Backend Typescript"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Backend Typescript Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//1.0.0/npmmanager.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="NPM | Backend Typescript"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//1.0.0/npmmanager.html#webpage",
    "url": "writerside-documentation//1.0.0/npmmanager.html",
    "name": "NPM | Backend Typescript",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Backend Typescript Help"
}</script><!-- End Schema.org --></head><body data-id="NPMManager" data-main-title="NPM" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="_JavaScript.topic|JavaScript"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Backend Typescript 1.0.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="NPMManager" id="NPMManager.topic">NPM</h1><section class="chapter"><h2 id="trk8ev_2" data-toc="trk8ev_2">Суть</h2><p id="trk8ev_9"><span id="trk8ev_12"><b>npm</b></span> &mdash; это стандартный <span class="tooltip" id="trk8ev_13" title="Инструмент для установки, обновления и удаления библиотек, а также управления их версиями и зависимостями">пакетный менеджер</span> для <span class="tooltip" id="trk8ev_14" title="Среда выполнения JavaScript вне браузера">Node.js</span>, который решает три базовые задачи: хранение и распространение <span class="tooltip" id="trk8ev_15" title="Архивированный модуль кода с метаданными package.json, распространяемый через реестр">пакетов</span> кода через <span class="tooltip" id="trk8ev_16" title="Сервис-хранилище пакетов (по умолчанию registry.npmjs.org), из которого npm устанавливает зависимости">регистр</span>, управление <span class="tooltip" id="trk8ev_17" title="Внешний пакет, необходимый для сборки, тестирования или работы приложения">зависимостями</span> вашего проекта и выполнение проектных <span class="tooltip" id="trk8ev_18" title="Именованная команда в секции scripts файла package.json, запускаемая через npm run">скриптов</span>. Он позволяет вам устанавливать библиотеки, фиксировать их версии согласно <span class="tooltip" id="trk8ev_19" title="Соглашение о версиях формата MAJOR.MINOR.PATCH и правилах их увеличения">семантическому версионированию</span>, а также автоматизировать рутинные операции (сборка, тесты, линтинг).</p><aside class="prompt" data-type="note" data-title="" id="trk8ev_10"><p id="trk8ev_20">npm входит в состав дистрибутива Node.js. После установки Node.js команда <code class="code" id="trk8ev_21">npm</code> доступна в терминале без дополнительных действий.</p></aside><aside class="prompt" data-type="warning" data-title="" id="trk8ev_11"><p id="trk8ev_22">Разные версии npm могут по-разному разрешать <span class="tooltip" id="trk8ev_23" title="Зависимость, которую должен установить конечный проект, обеспечивая совместимость плагина и хоста">peer-зависимости</span> и формировать <span class="tooltip" id="trk8ev_24" title="Файл package-lock.json, фиксирующий точные версии и дерево зависимостей для воспроизводимых установок">lock-файл</span>. Для командной разработки фиксируйте версию npm в CI и документируйте её в проекте.</p></aside></section><section class="chapter"><h2 id="trk8ev_3" data-toc="trk8ev_3">Основные команды</h2><ul class="list _bullet" id="trk8ev_25"><li class="list__item" id="trk8ev_28"><p><code class="code" id="trk8ev_43">npm init</code> &mdash; интерактивно создаёт <code class="code" id="trk8ev_44">package.json</code>. Быстрый вариант: <code class="code" id="trk8ev_45">npm init -y</code>.</p></li><li class="list__item" id="trk8ev_29"><p><code class="code" id="trk8ev_46">npm install</code> (сокр. <code class="code" id="trk8ev_47">npm i</code>) &mdash; устанавливает зависимости из <code class="code" id="trk8ev_48">package.json</code> и обновляет <code class="code" id="trk8ev_49">package-lock.json</code>. Без аргументов &mdash; установка всего; с именем пакета &mdash; установка конкретного.</p></li><li class="list__item" id="trk8ev_30"><p><code class="code" id="trk8ev_50">npm uninstall</code> (сокр. <code class="code" id="trk8ev_51">npm rm</code>) &mdash; удаляет пакет и записывает изменение в <code class="code" id="trk8ev_52">package.json</code>.</p></li><li class="list__item" id="trk8ev_31"><p><code class="code" id="trk8ev_53">npm update</code> &mdash; обновляет зависимости в рамках разрешённых диапазонов версий.</p></li><li class="list__item" id="trk8ev_32"><p><code class="code" id="trk8ev_54">npm run &lt;script&gt;</code> &mdash; запускает скрипт из секции <code class="code" id="trk8ev_55">scripts</code> файла <code class="code" id="trk8ev_56">package.json</code>.</p></li><li class="list__item" id="trk8ev_33"><p><code class="code" id="trk8ev_57">npm test</code> &mdash; алиас для <code class="code" id="trk8ev_58">npm run test</code>.</p></li><li class="list__item" id="trk8ev_34"><p><code class="code" id="trk8ev_59">npm exec</code> (или <code class="code" id="trk8ev_60">npx</code>) &mdash; запускает бинарь из зависимостей без глобальной установки.</p></li><li class="list__item" id="trk8ev_35"><p><code class="code" id="trk8ev_61">npm outdated</code> &mdash; показывает устаревшие пакеты и доступные версии (<code class="code" id="trk8ev_62">current</code>, <code class="code" id="trk8ev_63">wanted</code>, <code class="code" id="trk8ev_64">latest</code>).</p></li><li class="list__item" id="trk8ev_36"><p><code class="code" id="trk8ev_65">npm audit</code> &mdash; ищет уязвимости в зависимостях; <code class="code" id="trk8ev_66">npm audit fix</code> &mdash; пытается исправить автоматически.</p></li><li class="list__item" id="trk8ev_37"><p><code class="code" id="trk8ev_67">npm ci</code> &mdash; детерминированная установка по <code class="code" id="trk8ev_68">package-lock.json</code> для CI. Удаляет каталог <code class="code" id="trk8ev_69">node_modules</code> и ставит зависимости в точности как в lock-файле.</p></li><li class="list__item" id="trk8ev_38"><p><code class="code" id="trk8ev_70">npm cache</code> &mdash; управление локальным кэшем (см. раздел &laquo;Очистка кэша&raquo;).</p></li><li class="list__item" id="trk8ev_39"><p><code class="code" id="trk8ev_71">npm config</code> &mdash; чтение/запись настроек, эквивалентно правке <code class="code" id="trk8ev_72">.npmrc</code>.</p></li><li class="list__item" id="trk8ev_40"><p><code class="code" id="trk8ev_73">npm login</code>, <code class="code" id="trk8ev_74">npm logout</code>, <code class="code" id="trk8ev_75">npm whoami</code> &mdash; аутентификация в реестре для публикации.</p></li><li class="list__item" id="trk8ev_41"><p><code class="code" id="trk8ev_76">npm publish</code>, <code class="code" id="trk8ev_77">npm deprecate</code> &mdash; публикация и пометка версий пакета как устаревших.</p></li><li class="list__item" id="trk8ev_42"><p><code class="code" id="trk8ev_78">npm link</code> &mdash; локальная разработка пакетов через симлинки.</p></li></ul><div class="code-block" data-lang="bash">

Инициализация проекта

npm init -y

Установка библиотеки как обычной зависимости

npm i express

Установка библиотеки как dev-зависимости (только для разработки)

npm i -D typescript

Запуск локально установленного бинаря без глобальной установки

npx tsc --init

Проверка устаревших пакетов

npm outdated

Детерминированная установка в CI

npm ci
</div><aside class="prompt" data-type="tip" data-title="" id="trk8ev_27"><p id="trk8ev_79">Команды в разделе <code class="code" id="trk8ev_80">scripts</code> можно вызывать короче: вместо <code class="code" id="trk8ev_81">./node_modules/.bin/eslint</code> используйте <code class="code" id="trk8ev_82">npm run lint</code> &mdash; <code class="code" id="trk8ev_83">node_modules/.bin</code> автоматически в <code class="code" id="trk8ev_84">PATH</code>.</p></aside></section><section class="chapter"><h2 id="trk8ev_4" data-toc="trk8ev_4">Установка пакетов</h2><section class="chapter"><h3 id="trk8ev_85" data-toc="trk8ev_85">Локальная и глобальная установка</h3><p id="trk8ev_88">По умолчанию пакеты ставятся в каталог <code class="code" id="trk8ev_90">node_modules</code> текущего проекта и записываются в <code class="code" id="trk8ev_91">package.json</code>. Глобальная установка (<code class="code" id="trk8ev_92">npm i -g &lt;pkg&gt;</code>) используется для инструментов командной строки, которые вы вызываете из любого каталога (например, <code class="code" id="trk8ev_93">npm</code> сам установлен глобально).</p><aside class="prompt" data-type="warning" data-title="" id="trk8ev_89"><p id="trk8ev_94">Избегайте глобальной установки библиотек, которые нужны конкретному проекту: это нарушает воспроизводимость окружения коллег и CI.</p></aside></section><section class="chapter"><h3 id="trk8ev_86" data-toc="trk8ev_86">Типы зависимостей</h3><ul class="list _bullet" id="trk8ev_95"><li class="list__item" id="trk8ev_98"><p><span id="trk8ev_102"><b>dependencies</b></span> &mdash; нужны в рантайме приложения (например, <code class="code" id="trk8ev_103">express</code>).</p></li><li class="list__item" id="trk8ev_99"><p><span id="trk8ev_104"><b>devDependencies</b></span> &mdash; нужны только в разработке (тесты, линтеры, сборщики).</p></li><li class="list__item" id="trk8ev_100"><p><span id="trk8ev_105"><b>peerDependencies</b></span> &mdash; указывают совместимость с хост-пакетом (например, плагин требует <code class="code" id="trk8ev_106">react</code> определённой версии, но не устанавливает его сам).</p></li><li class="list__item" id="trk8ev_101"><p><span id="trk8ev_107"><b>optionalDependencies</b></span> &mdash; необязательные, их сбой установки не прерывает установку проекта.</p></li></ul><div class="code-block" data-lang="bash">

Добавить обычную зависимость

npm i axios

Добавить dev-зависимость

npm i -D vitest

Добавить peer-зависимость вручную (npm покажет предупреждение, но ставит не будет)

npm i react@^18
</div><aside class="prompt" data-type="note" data-title="" id="trk8ev_97"><p id="trk8ev_108">Для <span class="tooltip" id="trk8ev_109" title="Зависимость, которую должен установить конечный проект, обеспечивая совместимость плагина и хоста">peer-зависимостей</span> ответственность за установку лежит на приложении &mdash; это защищает от дублирования разных версий &laquo;ядра&raquo; (например, двух React в одном бандле).</p></aside></section><section class="chapter"><h3 id="trk8ev_87" data-toc="trk8ev_87">Форматы источников</h3><p id="trk8ev_110">npm поддерживает установку из реестра, по <code class="code" id="trk8ev_112">git</code>-URL, с локального пути и из tarball-архива.</p><div class="code-block" data-lang="bash">

Установка из Git

npm i git+https://github.com/user/repo.git

Локальная установка из папки пакета

npm i ../my-local-lib

Установка из tarball

npm i https://registry.npmjs.org/pkg/-/pkg-1.0.0.tgz

</div></section></section><section class="chapter"><h2 id="trk8ev_5" data-toc="trk8ev_5">Отслеживание версий (SemVer)</h2><p id="trk8ev_113">npm следует <span class="tooltip" id="trk8ev_116" title="Соглашение о версиях формата MAJOR.MINOR.PATCH и правилах их увеличения">SemVer</span>: <code class="code" id="trk8ev_117">MAJOR.MINOR.PATCH</code> (например, <code class="code" id="trk8ev_118">2.5.1</code>). Увеличение <code class="code" id="trk8ev_119">PATCH</code> &mdash; исправления без изменения API, <code class="code" id="trk8ev_120">MINOR</code> &mdash; новые обратносovместимые возможности, <code class="code" id="trk8ev_121">MAJOR</code> &mdash; потенциально ломающие изменения.</p><section class="chapter"><h3 id="trk8ev_114" data-toc="trk8ev_114">Диапазоны версий</h3><ul class="list _bullet" id="trk8ev_122"><li class="list__item" id="trk8ev_126"><p><code class="code" id="trk8ev_131">^1.4.2</code> &mdash; разрешает обновления <code class="code" id="trk8ev_132">MINOR</code>/<code class="code" id="trk8ev_133">PATCH</code> (до &lt;2.0.0).</p></li><li class="list__item" id="trk8ev_127"><p><code class="code" id="trk8ev_134">~1.4.2</code> &mdash; разрешает только <code class="code" id="trk8ev_135">PATCH</code> (до &lt;1.5.0).</p></li><li class="list__item" id="trk8ev_128"><p><code class="code" id="trk8ev_136">&gt;=1.2.0 &lt;2</code> &mdash; явный интервал.</p></li><li class="list__item" id="trk8ev_129"><p><code class="code" id="trk8ev_137">1.4.2</code> &mdash; строгая фиксация конкретной версии.</p></li><li class="list__item" id="trk8ev_130"><p>Пре-релизы: <code class="code" id="trk8ev_138">1.0.0-beta.1</code> &mdash; требуют явного указания.</p></li></ul><div class="code-block" data-lang="json">


{
    &quot;dependencies&quot;: {
        &quot;express&quot;: &quot;^4.19.0&quot;,
        &quot;zod&quot;: &quot;~3.23.8&quot;
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="trk8ev_124"><p id="trk8ev_139">Для библиотек используйте <code class="code" id="trk8ev_140">^</code> &mdash; потребители получат исправления и минорные улучшения. Для приложений с высокими требованиями к детерминизму выбирайте <code class="code" id="trk8ev_141">npm ci</code> в CI и контролируйте обновления через <code class="code" id="trk8ev_142">npm outdated</code> + ручной апдейт.</p></aside><aside class="prompt" data-type="warning" data-title="" id="trk8ev_125"><p id="trk8ev_143">Слепое использование <code class="code" id="trk8ev_144">^</code> может подтянуть несовместимые изменения, если автор библиотеки ошибочно выпустил ломающий релиз как <code class="code" id="trk8ev_145">MINOR</code>. В критичных системах фиксируйте версии в <code class="code" id="trk8ev_146">package-lock.json</code> и обновляйтесь контролируемо.</p></aside></section><section class="chapter"><h3 id="trk8ev_115" data-toc="trk8ev_115">Lock-файлы</h3><p id="trk8ev_147"><code class="code" id="trk8ev_150">package-lock.json</code> фиксирует точные версии, хеши и дерево зависимостей для воспроизводимых установок. В репозитории его следует коммитить.</p><ul class="list _bullet" id="trk8ev_148"><li class="list__item" id="trk8ev_151"><p><code class="code" id="trk8ev_153">npm install</code> &mdash; может изменять lock-файл согласно диапазонам.</p></li><li class="list__item" id="trk8ev_152"><p><code class="code" id="trk8ev_154">npm ci</code> &mdash; строго следует lock-файлу, установка падает при несоответствии.</p></li></ul><aside class="prompt" data-type="note" data-title="" id="trk8ev_149"><p id="trk8ev_155"><code class="code" id="trk8ev_156">npm-shrinkwrap.json</code> &mdash; &laquo;застывший&raquo; lock для публикации библиотек; перекрывает <code class="code" id="trk8ev_157">package-lock.json</code>.</p></aside></section></section><section class="chapter"><h2 id="trk8ev_6" data-toc="trk8ev_6">Очистка кэша</h2><p id="trk8ev_158">npm кэширует загруженные пакеты для ускорения последующих установок. Повреждённый кэш может приводить к ошибкам установки.</p><div class="code-block" data-lang="bash">

Проверка целостности кэша и вывод его пути

npm cache verify

Полная очистка кэша (требует --force)

npm cache clean --force
</div><aside class="prompt" data-type="warning" data-title="" id="trk8ev_160"><p id="trk8ev_162">Не используйте <code class="code" id="trk8ev_163">npm cache clean --force</code> как &laquo;ежедневную практику&raquo;: это замедляет билды и редко нужно. Сначала попробуйте <code class="code" id="trk8ev_164">npm cache verify</code> и переустановку зависимостей (<code class="code" id="trk8ev_165">rm -rf node_modules</code>, затем <code class="code" id="trk8ev_166">npm ci</code>).</p></aside><aside class="prompt" data-type="tip" data-title="" id="trk8ev_161"><p id="trk8ev_167">В CI имеет смысл кэшировать директории <code class="code" id="trk8ev_168">~/.npm</code> и <code class="code" id="trk8ev_169">node_modules</code> (или лучше &mdash; только кэш npm), чтобы ускорить сборки без потери детерминизма при использовании <code class="code" id="trk8ev_170">npm ci</code>.</p></aside></section><section class="chapter"><h2 id="trk8ev_7" data-toc="trk8ev_7">.npmrc (конфигурация npm)</h2><p id="trk8ev_171">Файл <code class="code" id="trk8ev_176">.npmrc</code> хранит настройки клиента npm на разных уровнях: глобально (в домашнем каталоге), локально (в корне проекта) и на уровне переменных окружения. Ключевые опции:</p><div class="code-block" data-lang="ini">


; Использовать собственный реестр (например, корпоративный)
registry=https://registry.npmjs.org/

; Складывать точные версии в package.json (без ^ и ~)
save-exact=true

; Принудительная проверка движка Node.js
engine-strict=true

; Авто-добавление node в PATH для скриптов на Windows
scripts-prepend-node-path=true

; Уровень отчётности audit
audit-level=high

; Отключить напоминания о финансировании
fund=false

; Префикс для глобальных установок (избегайте sudo)
prefix=${HOME}/.npm-global

; Авторизация для приватного реестра (используйте переменные окружения в CI)
; //registry.npmjs.org/:_authToken=${NPM_TOKEN}

; Настройки по скоупам
@my-scope:registry=https://npm.my-company.local/

</div><aside class="prompt" data-type="tip" data-title="" id="trk8ev_173"><p id="trk8ev_177">В CI храните токены в переменных окружения и подставляйте в <code class="code" id="trk8ev_178">.npmrc</code> через <code class="code" id="trk8ev_179">${NPM_TOKEN}</code>. Не коммитьте реальные токены в репозиторий.</p></aside><aside class="prompt" data-type="warning" data-title="" id="trk8ev_174"><p id="trk8ev_180"><code class="code" id="trk8ev_181">legacy-peer-deps=true</code> может &laquo;заглушить&raquo; конфликты peer-зависимостей, но приведёт к трудноотлавливаемым ошибкам в рантайме. Используйте только как временную меру и документируйте причину.</p></aside><section class="chapter"><h3 id="trk8ev_175" data-toc="trk8ev_175">Работа с конфигом через команду</h3><div class="code-block" data-lang="bash">

Прочитать значение

npm config get registry

Установить значение на уровне пользователя

npm config set save-exact true

Установить значение локально (в .npmrc проекта)

npm config set engine-strict true --location=project
</div></section></section><section class="chapter"><h2 id="trk8ev_8" data-toc="trk8ev_8">Практический минимум: от нуля до запуска</h2><div class="code-block" data-lang="bash"> # 1) Инициализация проекта npm init -y
2) Добавляем зависимости

npm i express

3) Добавляем dev-инструменты

npm i -D typescript ts-node nodemon

4) Настраиваем скрипты
(редактируем package.json вручную или через npm set-script)

npm set-script dev &quot;nodemon src/index.ts&quot;
npm set-script build &quot;tsc -p tsconfig.json&quot;
npm set-script start &quot;node dist/index.js&quot;

5) Детерминированная установка в CI

npm ci

6) Безопасность и обновления

npm audit --production
npm outdated
</div><div class="code-block" data-lang="json">


{
    &quot;name&quot;: &quot;my-app&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;,
    &quot;type&quot;: &quot;module&quot;,
    &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;nodemon src/index.ts&quot;,
        &quot;build&quot;: &quot;tsc -p tsconfig.json&quot;,
        &quot;start&quot;: &quot;node dist/index.js&quot;,
        &quot;lint&quot;: &quot;eslint .&quot;,
        &quot;test&quot;: &quot;vitest run&quot;
    },
    &quot;engines&quot;: {
        &quot;node&quot;: &quot;&gt;=20.0.0&quot;,
        &quot;npm&quot;: &quot;&gt;=10.0.0&quot;
    },
    &quot;dependencies&quot;: {
        &quot;express&quot;: &quot;^4.19.0&quot;
    },
    &quot;devDependencies&quot;: {
        &quot;typescript&quot;: &quot;^5.6.0&quot;,
        &quot;vitest&quot;: &quot;^2.0.0&quot;
    }
}
</div><aside class="prompt" data-type="note" data-title="" id="trk8ev_185"><p id="trk8ev_186">Поле <code class="code" id="trk8ev_187">engines</code> помогает раннее выявлять несовместимости окружения; в сочетании с <code class="code" id="trk8ev_188">engine-strict=true</code> установка прервётся при неподходящей версии Node.js.</p></aside></section><div class="last-modified">26 сентября 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="firstprogram.html" class="navigation-links__prev">Первая программа на JavaScript и запуск ее на NodeJS</a><a href="javascript-es5.html" class="navigation-links__next">Основы JavaScript ES5</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>